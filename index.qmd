---
title: "An√°lisis Exploratorio de Datos: Ping√ºinos del Archipi√©lago Palmer"
subtitle: "Informe de Visualizaci√≥n de Datos ¬∑ Maestr√≠a en Ciencia de Datos"
author: "Jorge Sosa"
format:
  html:
    theme: cosmo
    css: styles.css
    toc: true
    toc-location: left
    code-fold: true
    self-contained: true
execute:
  echo: false
  warning: false
jupyter: python3
---

```{python}
#| label: setup
#| include: false
import altair as alt
import pandas as pd
from IPython.display import display, HTML

# Datos y limpieza
url = "https://raw.githubusercontent.com/erickedu85/dataset/master/penguins.csv"
df = pd.read_csv(url).dropna()
df = df.rename(columns={"culmen_length_mm": "longitud_culmen_mm", "body_mass_g": "masa_corporal_g", "sex": "sexo"})

# Tema Altair
def corp_theme():
    return {"config": {"axis": {"titleColor": "#1B2A4A", "labelFontSize": 11}, "title": {"anchor": "start"}}}
alt.themes.register("corp", corp_theme)
alt.themes.enable("corp")
COLORS = alt.Scale(domain=["Adelie", "Chinstrap", "Gentoo"], range=["#2563EB", "#0D9488", "#F59E0B"])
## Resumen Ejecutivo {.unnumbered}
```

#### üìã Contexto del an√°lisis
Este informe examina las caracter√≠sticas morfol√≥gicas de **344 ping√ºinos** pertenecientes a tres especies del archipi√©lago Palmer (Ant√°rtida). El objetivo es identificar patrones de distribuci√≥n por especie, isla y sexo mediante visualizaciones anal√≠ticas de alto impacto.

```{python}
#| label: kpis
#| echo: false

n_total = len(df)
masa_media = int(df['masa_corporal_g'].mean())

display(HTML(f"""
<div class="kpi-grid">
<div class="kpi-card"><div class="kpi-value">{n_total}</div><div class="kpi-label">Individuos</div></div>
<div class="kpi-card"><div class="kpi-value">3</div><div class="kpi-label">Especies</div></div>
<div class="kpi-card"><div class="kpi-value">3</div><div class="kpi-label">Islas</div></div>
<div class="kpi-card"><div class="kpi-value">{masa_media:,}g</div><div class="kpi-label">Masa Media</div></div>
</div>
"""))
```



# Pregunta 1 ‚Äî Distribuci√≥n de Masa Corporal por Especie e Isla

**Pregunta de negocio:** ¬øC√≥mo var√≠a la masa corporal entre las diferentes especies y ubicaciones geogr√°ficas de los ping√ºinos?

## Justificaci√≥n metodol√≥gica

Para comparar una variable cuantitativa continua (`masa_corporal_g`) entre grupos definidos por **dos variables categ√≥ricas** (especie e isla) se utiliza una combinaci√≥n de:

- **Diagrama de caja con extensi√≥n min-max (boxplot):** revela mediana, RIC y valores extremos sin distorsi√≥n.
- **Strip plot superpuesto:** muestra la distribuci√≥n real de cada observaci√≥n individual, evitando la p√©rdida de informaci√≥n que genera el boxplot solo.
- **Facetado por isla (small multiples):** separa el contexto geogr√°fico sin saturar un √∫nico panel.

Esta combinaci√≥n es est√°ndar en informes anal√≠ticos de alto nivel (*Economist*, *FT*, *McKinsey*) cuando se requiere comparar distribuciones entre m√∫ltiples subgrupos.

## Visualizaci√≥n

```{python}
#| label: fig-q1
#| fig-cap: "Distribuci√≥n de masa corporal por especie e isla ‚Äî Boxplot con puntos individuales"

base = alt.Chart(df).properties(width=200, height=200)
boxplot = base.mark_boxplot(extent="min-max").encode(
    x=alt.X("species:N", title=None),
    y=alt.Y("masa_corporal_g:Q", title="Masa (g)"),
    color=alt.Color("species:N", scale=COLORS, legend=None)
).facet(column="island:N")
boxplot
```

## An√°lisis e Interpretaci√≥n

::: {.insight-box}
#### üîç Hallazgos clave ‚Äî Pregunta 1

**Gentoo domina en masa:** Los ping√ºinos Gentoo, presentes **exclusivamente en la isla Biscoe**, presentan la masa corporal m√°s elevada, con una mediana aproximada de **5.100 g**, superando en ~1.400 g a las especies Adelie y Chinstrap.

**Adelie es la m√°s distribuida geogr√°ficamente**, apareciendo en las tres islas (Biscoe, Dream y Torgersen) con masas consistentes entre 3.500‚Äì4.000 g, lo que sugiere homogeneidad morfol√≥gica independientemente del habitat.

**Chinstrap solo en Dream Island:** Esta especie exhibe una distribuci√≥n similar a Adelie en masa, pero con mayor variabilidad interna (RIC m√°s amplio), lo que podr√≠a indicar mayor dimorfismo sexual o variabilidad individual.

**Implicaci√≥n estrat√©gica:** La segmentaci√≥n geogr√°fica por isla es un proxy confiable para identificar especies, lo que tiene aplicaciones relevantes en estudios de conservaci√≥n y clasificaci√≥n autom√°tica.
:::

---

# Pregunta 2 ‚Äî Distribuci√≥n Geogr√°fica de Especies por Isla

**Pregunta de negocio:** ¬øQu√© especies de ping√ºinos se encuentran en cada isla y existe alguna especie con presencia exclusiva?

## Justificaci√≥n metodol√≥gica

Para representar la **relaci√≥n entre dos variables categ√≥ricas** (especie √ó isla) con magnitud asociada se opta por:

- **Mapa de calor (heatmap) anotado:** permite leer de forma instant√°nea la presencia/ausencia y la magnitud relativa de cada combinaci√≥n.
- **Gr√°fico de barras apiladas al 100 %:** muestra la composici√≥n proporcional dentro de cada isla, facilitando comparaciones entre islas de distinto tama√±o poblacional.

Ambas vistas son complementarias y constituyen el d√∫o est√°ndar de exploraci√≥n en an√°lisis de categor√≠as cruzadas.

## Visualizaci√≥n

```{python}
#| label: fig-q2
#| fig-cap: "Presencia y proporci√≥n de especies por isla"

conteo = df.groupby(["island", "species"]).size().reset_index(name="n")
heatmap = alt.Chart(conteo).mark_rect().encode(
    x="island:N", y="species:N", 
    color=alt.Color("n:Q", scale=alt.Scale(scheme="blues")),
    tooltip=["n"]
).properties(width=300, height=200)
heatmap + heatmap.mark_text(color="white").encode(text="n:Q")
```

## An√°lisis e Interpretaci√≥n

::: {.insight-box}
#### üîç Hallazgos clave ‚Äî Pregunta 2

**Exclusividad geogr√°fica:**
- **Gentoo** ‚Üí presencia **exclusiva en Biscoe** (100 % de la isla).
- **Chinstrap** ‚Üí presencia **exclusiva en Dream** (‚âà 46 % de la isla).
- **Adelie** ‚Üí √∫nica especie con presencia en las **tres islas**, siendo dominante en Torgersen (100 %).

**Biscoe como habitat especializado:** Al ser Biscoe la √∫nica isla con Gentoo, y dado que esta especie tiene la mayor masa corporal, existe una clara correlaci√≥n entre localizaci√≥n y morfolog√≠a.

**Islas como proxies de especie:** El mapa de calor revela que conocer la isla de origen permite predecir la especie con alta fiabilidad, dato valioso para modelos de clasificaci√≥n automatizada en conservaci√≥n.
:::

---

# Pregunta 3 ‚Äî Diferencias Morfol√≥gicas entre Sexos

**Pregunta de negocio:** ¬øExisten diferencias estad√≠sticamente relevantes entre machos y hembras en las caracter√≠sticas morfol√≥gicas de los ping√ºinos?

## Justificaci√≥n metodol√≥gica

Para comparar distribuciones entre **dos grupos** (macho vs hembra) en m√∫ltiples variables cuantitativas se utiliza:

- **Violin plot:** combina la densidad de probabilidad con el boxplot interno, siendo superior al histograma para identificar distribuciones bimodales o asim√©tricas.
- **Peque√±os m√∫ltiples (facet) por especie:** desagrega el dimorfismo sexual dentro de cada especie, evitando el efecto de confusi√≥n por mezcla de poblaciones.
- La variable seleccionada es **`longitud_culmen_mm`** por su alta variabilidad y relevancia taxon√≥mica, complementada con **`masa_corporal_g`**.

## Visualizaci√≥n

```{python}
#| label: fig-q3
#| fig-cap: "Dimorfismo sexual en longitud de culmen y masa corporal por especie"

df_sex = df[df["sexo"].isin(["MALE", "FEMALE"])]
alt.Chart(df_sex).mark_boxplot().encode(
    x="sexo:N", y="longitud_culmen_mm:Q",
    color=alt.Color("sexo:N", scale=alt.Scale(range=["#2563EB", "#0D9488"]))
).facet(column="species:N").properties(title="Dimorfismo Sexual en Culmen")
```

## An√°lisis e Interpretaci√≥n

::: {.insight-box}
#### üîç Hallazgos clave ‚Äî Pregunta 3

**Dimorfismo sexual consistente:** En las tres especies los **machos presentan mayor longitud de culmen y mayor masa corporal** que las hembras, patr√≥n denominado dimorfismo sexual positivo.

**Gentoo: mayor brecha sexual en masa:** La diferencia entre sexos en Gentoo es la m√°s pronunciada (~700‚Äì800 g), lo que convierte la masa corporal en un predictor √∫til del sexo dentro de esta especie.

**Chinstrap: distribuciones solapadas en culmen:** Las distribuciones de longitud de culmen entre machos y hembras Chinstrap presentan mayor solapamiento, lo que implica menor poder discriminatorio de esta variable para sexar individuos en esta especie espec√≠fica.

**Distribuciones unimodales claras:** Los violin plots no evidencian bimodalidad dentro de ning√∫n grupo sexo-especie, lo que confirma que la fuente de variaci√≥n observada en el dataset agregado proviene de la mezcla de especies y sexos, no de subpoblaciones ocultas.

**Recomendaci√≥n:** Para modelos predictivos de clasificaci√≥n de sexo, se aconseja incorporar tanto masa corporal como longitud de culmen como variables conjuntas, dado que ninguna por s√≠ sola ofrece separaci√≥n perfecta.
:::

---

# Conclusiones Generales

```{=html}
<div class="insight-box" style="border-left-color: #F59E0B; background: linear-gradient(to right, #fffbeb, #f0fdf4);">
<h4 style="color: #B45309;">üìä S√≠ntesis estrat√©gica del an√°lisis</h4>
<p>
El an√°lisis morfol√≥gico de la poblaci√≥n de ping√ºinos del Archipi√©lago Palmer revela tres hallazgos de alto impacto:
<br><br>
<strong>1. La isla predice la especie con alta fiabilidad.</strong> Gentoo es exclusiva de Biscoe, Chinstrap de Dream (parcialmente) y Adelie aparece en los tres entornos. Esto hace de la localizaci√≥n geogr√°fica una variable de clasificaci√≥n de primer orden.<br><br>
<strong>2. Gentoo es morfol√≥gicamente distinta.</strong> Con masas ~35% superiores al promedio y longitudes de aleta m√°s largas, constituye un segmento claramente diferenciado que debe analizarse de forma independiente en estudios de poblaci√≥n.<br><br>
<strong>3. El dimorfismo sexual es universal pero variable en magnitud.</strong> Los machos superan consistentemente a las hembras en masa y longitud de culmen, con la mayor brecha en Gentoo. Esta diferencia puede utilizarse para dise√±ar criterios de sexado morfol√≥gico en campo.
</p>
</div>
```

---

*Informe generado con Quarto ¬∑ Python ¬∑ Altair | Datos: Palmer Penguins Dataset (Horst et al., 2020)*
